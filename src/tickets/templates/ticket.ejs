<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Ticket</title>

    <style>
      * {
        box-sizing: border-box;
        font-family: Arial, Helvetica, sans-serif;
      }

      body {
        margin: 0;
        background: #0b132b;
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
      }

      /* ================= TICKET ================= */
      .ticket {
        width: 332px;
        background: #fff;
        border-radius: 18px;
        padding: 18px;
        position: relative;
      }

      /* ================= CUTS ================= */
      .cut {
        position: absolute;
        width: 14px;
        height: 14px;
        background: #0b132b;
        border-radius: 50%;
      }

      .cut.left {
        left: -7px;
      }
      .cut.right {
        right: -7px;
      }

      .cut.top {
        top: 104px;
      }
      .cut.bottom {
        bottom: 169px;
      }

      /* ================= HEADER ================= */
      .header {
        display: flex;
        flex-direction: column;
        align-items: flex-start;
        padding: 0.3rem 0;
      }

      .header-text {
        display: flex;
        width: 100%;
        justify-content: space-between;
        gap: 6px;
      }

      .logo-placeholder {
        width: 5rem;
        height: 4.56rem;
        border: 2px dashed #bbb;
        font-size: 9px;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .website {
        font-size: 9px;
      }

      .phone {
        font-size: 9px;
        text-align: right;
      }

      /* ================= DIVIDER ================= */
      .divider {
        border-top: 1px dashed #ccc;
      }
      
      .second-step {
          padding: 0.5rem 0;
      }

      /* ================= SECTIONS ================= */
      h3 {
        font-size: 11px;
        margin: 0 0 6px;
        letter-spacing: 1px;
      }

      .passengers {
        padding-bottom: 0.3rem;
      }

      .passengers p {
        font-size: 10px;
        margin: 0px 1rem 4px;
      }

      /* ================= CHECK IN ================= */
      .checkin {
        display: flex;
        justify-content: space-between;
      }

      .time-box {
        background: #0b132b;
        color: #fff;
        font-size: 2.5rem;
        font-weight: bold;
        text-align: center;
        padding: 10px 0;
        border-radius: 10px;
        width: 155px;
      }

      .checkin small {
        display: block;
        font-size: 8px;
        max-width: 100px;
      }

      .qr {
        border: 2px dashed #bbb;
        width: 88px;
        height: 88px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 10px;
        margin-bottom: 6px;
      }

      .qr-text {
        width: 88px;
        font-size: 8px;
        text-align: justify;
      }

      /* ================= FOOTER ================= */
      .footer {
        display: flex;
        justify-content: space-between;
        align-items: flex-end;
        margin-top: 0.5rem;
      }

      .footer-left {
        display: flex;
        flex-direction: column;
        gap: 10px;
      }

      .ship {
        font-size: 10px;
        line-height: 1.3;
      }

      .routes {
        display: flex;
        gap: 2rem;
      }

      .route {
        font-size: 8px;
        line-height: 1.2;
      }

      .route strong {
        display: block;
        font-size: 11px;
      }

      .route .code {
        color: #d11f2f;
        font-weight: bold;
        font-size: 0.6rem;
      }

      .footer-logo {
        width: 46px;
        height: 70px;
        border: 2px dashed #bbb;
        font-size: 9px;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      /* ================= WATERMARK ================= */
      .watermark {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        overflow: hidden;
        border-radius: 18px;
        z-index: 10;
        opacity: 0.06;
        display: flex;
        flex-wrap: wrap;
        align-content: flex-start;
        padding: 20px 0;
        gap: 0;
      }

      .watermark-row {
        display: flex;
        width: 200%;
        transform: rotate(-30deg) translateX(-25%);
        margin-bottom: 18px;
      }

      .watermark-text {
        font-size: 9px;
        font-weight: bold;
        color: #0b132b;
        white-space: nowrap;
        letter-spacing: 3px;
        user-select: none;
        margin-right: 20px;
      }

      .microfont {
        font-size: 3px;
        color: #bbb;
        text-align: center;
        letter-spacing: 0.2px;
        user-select: none;
        margin-top: 4px;
        padding-bottom: 2px;
      }

      /* ================= STATUS BANNER ================= */
      .status-banner {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        border-radius: 18px;
        overflow: hidden;
        z-index: 20;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .status-banner-label {
        transform: rotate(-30deg);
        font-size: 3rem;
        font-weight: 900;
        letter-spacing: 6px;
        text-transform: uppercase;
        opacity: 0.18;
        white-space: nowrap;
        color: #d11f2f;
        border: 6px solid #d11f2f;
        padding: 6px 18px;
        border-radius: 6px;
      }
    </style>
  </head>

  <body>
    <div class="ticket">
      <!-- cuts -->
      <div class="cut left top"></div>
      <div class="cut right top"></div>
      <div class="cut left bottom"></div>
      <div class="cut right bottom"></div>

      <!-- HEADER -->
      <div class="header">
        <div class="logo-placeholder">LOGO</div>
        <div class="header-text">
          <div class="website">www.ferrys.com</div>
          <div class="phone">+593 98 644 9645</div>
        </div>
      </div>

      <div class="divider"></div>

      <div class="second-step">
          <!-- PASSENGERS -->
      <div class="passengers">
        <h3>PASSANGERS</h3>
            <% passengers.forEach(passenger => { %>
          <p><%= passenger.name %>, <%= passenger.code %>.</p>
        <% }); %>
      </div>

      <!-- CHECK IN -->
      <div class="checkin">
        <div>
          <h3 style="padding: 0; margin: 0">CHECK IN</h3>
          <div style="font-size: 10px">Passenger Dock</div>
          <div class="time-box"><%= checkInTime %></div>
          <div style="padding-top: 0.5rem">
              <small>
            Check 50 min. before of the departure time.<br /><br />
            Luggage limit 23 kg and a carry-on suitcase<br /><br />
            If you are not traveling, your ticket is not refundable.
          </small>
          </div>
        </div>

        <div>
          <div class="qr">QR</div>
          <div class="qr-text">
            Present QR Code in Galapagos Home to will have 10% disc on your
            reservation.
          </div>
        </div>
      </div>
      </div>

      <div class="divider"></div>

      <!-- FOOTER -->
      <div class="footer">
        <div class="footer-left">
          <div class="ship">
            <strong><%= ferry %></strong><br />
            <span>Ferry</span><br />
            <p><%= date %></p>
          </div>

          <div class="routes">
            <div class="route">
              <span style="font-size: 0.6rem">FROM</span><br />
              <span class="code"><%= from %></span>
              <strong style="font-size: 2rem"><%= departureTime %></strong>
              <%= origin %><br />
              Galapagos
            </div>

            <div class="route">
              <span style="font-size: 0.6rem">TO</span><br />
              <span class="code"><%= to %></span>
              <strong style="font-size: 2rem"><%= arriveTime %></strong>
              <%= destination %><br />
              Galapagos
            </div>
          </div>
        </div>

        <div class="footer-logo">LOGO</div>
      </div>

      <!-- Fingerprint layer -->
      <div class="microfont"><%= ticketCode %> Â· <%= generatedAt %></div>

      <!-- Status banner -->
      <% if (status && status !== 'confirmed' && status !== 'checked_in' && status !== 'completed') { %>
        <div class="status-banner" aria-hidden="true">
          <span class="status-banner-label"><%= status %></span>
        </div>
      <% } %>

      <!-- Watermark layer (capa 1) -->
      <div class="watermark" aria-hidden="true">
        <% for(let i = 0; i < 8; i++) { %>
          <div class="watermark-row">
            <% for(let j = 0; j < 6; j++) { %>
              <span class="watermark-text"><%= ticketCode %></span>
            <% } %>
          </div>
        <% } %>
      </div>
    </div>
  </body>
</html>
